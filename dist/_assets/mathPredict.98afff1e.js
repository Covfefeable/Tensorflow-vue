let e=document.createElement("style");e.innerHTML=".loading[data-v-dc8eabd0]{width:75vw;height:400px;overflow-y:hidden;text-align:center;background:linear-gradient(-45deg,#6cbaa1,#697eff,#00b4db,#0083b0,#3e5ade);background-size:400%;animation:10s infinite Gradient-dc8eabd0;-webkit-animation:10s infinite Gradient-dc8eabd0}@keyframes Gradient-dc8eabd0{0%,100%{background-position:0 50%}50%{background-position:100% 50%}}",document.head.appendChild(e);import{d as a,l as t,t as i,a as s,i as n}from"./index.47871813.js";import{s as o,d}from"./exports_layers.d0bb66af.js";import{p as r,b as l,o as c,c as h,a as p,d as g,e as m,v as u,F as b,w as f}from"./index.371535d0.js";var x={data:()=>({loading:!1,predictValue:"预测中",config:{sgd:.001,batchSize:50,epochs:100}}),mounted(){},methods:{initTrain(){this.loading=!0;let e=[],a=[],t=[];for(let t=0;t<30;t++)e.push(t),a.push(5*t+1);for(let e=0;e<50;e++)t.push(e);this.startTrain(e,a,t)},startTrain(e,n,r){a.render.scatterplot({name:"线性回归训练集"},{values:e.map(((e,a)=>({x:e,y:n[a]})))});const l=o();l.add(d({units:1,inputShape:[1]})),l.compile({loss:t.meanSquaredError,optimizer:i.sgd(this.config.sgd)});const c=s(e),h=s(n);l.fit(c,h,{batchSize:this.config.batchSize,epochs:this.config.epochs,callbacks:a.show.fitCallbacks({name:"训练过程"},["loss"])}).then((()=>{const e=l.predict(s([...r]));this.predictValue=e.dataSync(),this.initChart(r,n,this.predictValue),this.loading=!1}))},initChart(e,a,t){var i=n(document.getElementById("math-chart"));let s=[],o=[];for(let i=0;i<e.length;i++)s.push([e[i],a[i]]),o.push([e[i],t[i]]);let d=["#5470C6","#EE6666"];i.setOption({color:d,tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{data:["实际值","预测值"]},grid:{top:50,bottom:40,left:30},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:d[1]}},axisPointer:{label:{formatter:function(e){return"预测值  "+e.value+(e.seriesData.length?"："+e.seriesData[0].data:"")}}},data:[...e]},{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:d[0]}},axisPointer:{label:{formatter:function(e){return"实际值  "+e.value+(e.seriesData.length?"："+e.seriesData[0].data:"")}}},data:[...e]}],yAxis:[{type:"value"}],series:[{name:"实际值",type:"line",xAxisIndex:1,smooth:!0,emphasis:{focus:"series"},data:[...a]},{name:"预测值",type:"line",smooth:!0,emphasis:{focus:"series"},data:[...t]}]})}}};const y=f();r("data-v-dc8eabd0");const v=p("h2",null,"线性回归 - 一元一次方程组 (y = 5x + 1)",-1),k={key:0,class:"loading"},w={id:"math-chart",style:{width:"75vw",height:"400px"}};l();const S=y(((e,a,t,i,s,n)=>(c(),h(b,null,[v,p("button",{style:{"margin-bottom":"10px"},onClick:a[1]||(a[1]=e=>n.initTrain())},"开始训练"),s.loading?(c(),h("div",k)):g("",!0),m(p("div",w,null,512),[[u,!s.loading]])],64))));x.render=S,x.__scopeId="data-v-dc8eabd0";export default x;
